@use "sass:color";

:root {
    --quality-success: hsl(120, 100%, 25%);
    --quality-success-fade: hsl(120, 50%, 85%);
    --quality-warning: hsl(34, 100%, 50%);
    --quality-warning-fade: hsl(34, 50%, 85%);
    --quality-info: hsl(240, 100%, 50%);
    --quality-info-fade: hsl(240, 50%, 85%);
    --quality-error: hsl(0, 100%, 50%);
    --quality-error-fade: hsl(0, 50%, 85%);
    --border-radius: 0.5em;
}

body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

.metadata-grid {
    .col1 {
        grid-area: col1;
    }

    .col2 {
        grid-area: col2;
    }

    display: grid;
    grid-template-columns: auto fit-content(360px);
    gap: 2em 0;
    grid-template-areas: "col2 col2"
    "col1 col1";
}

.metadata {

    a {
        word-break: break-word;
    }

    .section {
        padding: 2em 0;

        &-grey {
            background-color: hsl(0, 0%, 95%);
            border: 1px solid #ccc;

            &:has(.notice) {
                .disclaimer {
                    margin-top: -2.5em
                }
            }
        }
    }


    .disclaimer {
        border: 1px solid #bbb;
        padding: 1em 0;
        margin: -1.1em 0 1em 0;
        font-style: italic;

        strong {
            font-style: normal;
        }
    }





    .description {
        display: grid;
        grid-template-columns: auto fit-content(450px);

        .browseimage {
            display: none;

            img {
                padding: 1em;
                max-width: 100%;
                max-height: 200px;
            }
        }

        @media only screen and (min-width: 640px) {
            .browseimage {
                display: block;
            }
        }
    }

    #section-title {
        margin-top: 3em;
        padding: 1em 0;

        &:not(:has(.notice)) {
            border-bottom: 1px solid $gray-light;
            margin-bottom: 1em;
        }

        h1 {
            margin-top: 0;
            margin-bottom: 0.2em;
            text-wrap: balance;
        }

        .authorList {
            color: #717171;
        }

        .doi {
            font-size: 90%;
            margin: 0;
        }

        .alert-In-progress,
        .alert-Embargoed {
            @extend .alert !optional;
            @extend .alert-info !optional;
        }

        .alert-Superseded,
        .alert-Withdrawn {
            @extend .alert !optional;
            @extend .alert-danger !optional;
        }
    }

    .publicationDate {
        margin-top: 1.6em;
        font-weight: bolder;
    }

    .alternativeViews {
        .dropdown-toggle {
            padding: 0.6em 1em;

            cursor: pointer;
        }

        &.open {
            .dropdown-toggle {
                box-shadow: none;
            }
        }
    }

    .alert--linked {
        margin: -1em 1em 1em 1em;
        display: grid;
        grid-template-columns: 1fr;
        gap: 1em;
        align-items: center;
        justify-items: center;
        border: 2px solid gray;
        padding: 1em;

        &-eidc {
            display: grid;
            grid-template-columns: 1fr;
            align-items: center;
            justify-items: center;
            gap: 1em;
        }

        >div {
            font-weight: bold;
            text-align: center;
        }
    }

    #latestVersion {
        margin-bottom: 1.5em;

        .otherVersions {
            margin-left: 0.6em;
            color: $link-color;

            &:hover {
                color: $link-hover-color;
                text-decoration: underline;
                cursor: pointer;
            }
        }

        ul {
            li {
                a {
                    font-size: 0.85em;
                    padding: 0.75em 1.5em;
                }
            }
        }
    }

    .missingResourceType {
        margin: 4em 0;

        a {
            margin-left: 1em;
            @extend .btn !optional;
            @extend .btn-danger !optional;
            @extend .btn-sm !optional;
        }
    }

    .qualityAlert {
        .alert {
            margin: 1em 0 -0.5em 0;
            background-color: transparent;
            border: 2px solid #aaa;
            border-radius: 10px;
        }

        .alert-MDquality_danger {
            border-color: var(--quality-error);
            color: var(--quality-error);
        }

        .alert-MDquality_error {
            border-color: var(--quality-error);
            color: var(--quality-error);
        }

        .alert-MDquality_warning {
            border-color: var(--quality-warning);
            color: var(--quality-warning);
        }

        .alert-MDquality_info {
            border-color: var(--quality-info);
            color: var(--quality-info);
        }

        span {
            margin: 0 1.2em;
        }
    }

    .distribution-dataset {
        >div {
            margin-bottom: 2em;
        }

        .licenceText {
            .ogl-logo {
                margin-top: 0.3em;
                @extend .float-end !optional;
            }
        }
    }

    .modal {
        z-index: 2001;

        .modal-body {
            #citation-text {
                margin: -0.5em 2em 2em 2em;
            }

            .licenceText {
                margin-top: 3em;
                @extend .text-center !optional;

                img {
                    display: block;
                    margin: 5px auto;
                }
            }
        }
    }

    #document-description {
        margin: 1em 0;
        padding-top: 1em;
    }

    #document-thirdparty {
        display: block;
    }

    #section-children {
        margin-top: 3em;
    }

    #section-citations {
        .citations {
            max-height: 500px;
            overflow-y: auto;
            overflow-x: clip;
            padding-right: 0.5em;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #ccc;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #888;
        }

        ::-webkit-scrollbar-thumb:focus {
            background: #888;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
        }
    }

    .supplement,
    .citation {
        margin: 2em 0;
        overflow: hidden;
    }

    .notice {
        border: var(--_notice-border-width, 2px) solid var(--_notice-border-colour, #ddd);
        padding: 1em;
        margin: 1.4em 0;
        background-color: var(--_notice-background-colour, #fff);
        border-radius: 6px;
        z-index: 1000;

        small {
            font-size: 80%;
            text-decoration: underline;
            text-decoration-style: dotted;
        }

        span {
            color: red;
            font-weight: bolder;
        }

        p:last-of-type {
            margin-bottom: 0;
        }

        &--restricted {
            --_notice-border-colour: red;
        }

        &--deleted {
            --_notice-border-colour: red;
            --_notice-background-colour: rgba(255, 0, 0, 0.05);
        }

        &-signpost {
            .licenceText {
                display: none;
            }
        }
    }

    #document-distribution {
        .signpostURL {
            display: block;
            margin: 1em 0;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .divider {
            height: 1px;
            background: $gray-light;
            margin: 1.2em 0;
        }

        .onlineResourceLinks {
            margin: 2em 0;

            .btn {
                white-space: collapse;
                margin: 0.8em 0;
                color: white;

                &:active {
                    transform: translate(2px, 2px);
                }

                span:first-child {
                    margin-right: 0.35em;
                }

                &-download {
                    @extend .w-100 !optional;
                    font-weight: 600;
                    background-color: var(--primary-colour);

                    &:hover,
                    &:focus {
                        background-color: color.adjust($brand-success, $lightness: 15%, $space: hsl);
                    }
                    > small { font-weight: 200; margin-left:3px; }
                }

                &-supporting {
                    @extend .w-100 !optional;
                    background-color: color.adjust($brand-success, $lightness: 15%, $space: hsl);

                    &:hover,
                    &:focus {
                        background-color: color.adjust($brand-success, $lightness: 30%, $space: hsl);
                    }
                }
            }
        }
    }

    #document-otherContacts {
        dl.dl-horizontal {

            dd,
            dt {
                margin-bottom: 0;
            }
        }
    }

    h2 {
        margin-top: 2.5em;
        border-bottom: 1px solid $gray-light;
        padding-bottom: 6px;
    }

    .cards {
        display: flex;
        justify-content: center;
        gap: 1em;
        flex-wrap: wrap;

        a.card {
            --_card-repeat: 3;
            --_card-display: grid;
            --_card-background: hsl(0, 0%, 100%);
            --_card-border-colour: var(--primary-colour);
            --_card-border-style: solid;
            --_card-text-colour: black;
            --_card-link-colour: inherit;
            --_card-icon-colour: var(--_card-border-colour);

            display: var(--_card-display);
            flex: 0 0 calc((100% - calc(var(--_card-repeat) * 1em) + 1em) / var(--_card-repeat));
            padding: 1rem;
            grid-template-columns: 70px auto;
            background-color: var(--_card-background);
            border: 2px var(--_card-border-style) var(--_card-border-colour);
            border-radius: 6px;
            text-decoration: none;
            text-wrap: balance;

            .content {
                display: flex;
                gap: 1em;
                flex-direction: row;
            }

            .card-icon {
                display: grid;
                justify-content: center;
                align-content: center;
                width: 5rem;
                height: 5rem;
                border-radius: 8px;
                color: var(--_card-icon-colour);
            }

            .card-type {
                color: #999;

                span {
                    display: none;
                    margin-right: 1em;
                    text-transform: uppercase;
                    font-size: 80%;
                    font-weight: 600;
                }
            }

            .card-title {
                color: var(--_card-text-colour);
            }

            &:hover {
                --_card-background: var(--primary-colour) !important;
                --_card-text-colour: white !important;
                --_card-icon-colour: white !important;

                .fa-inverse {
                    color: var(--_card-background) !important;
                }
            }

            &-hidden {
                --_card-display: none;
            }

            &-draft {
                --_card-background: hsl(0, 0%, 95%);
                --_card-border-colour: #BBB;
                --_card-text-colour: #BBB;
                --_card-icon-colour: #BBB;
                --_card-border-style: dashed;

                .card-type {
                    span {
                        display: inline;
                    }
                }
            }

            &-pending {
                --_card-border-colour: #444;
                --_card-text-colour: #444;
                --_card-icon-colour: #BBB;
                --_card-border-style: dashed;

                .card-type {
                    span {
                        display: inline;
                    }
                }
            }

            &-draft,
            &-pending {
                &:hover {
                    --_card-background: lightgray !important;
                    --_card-text-colour: gray !important;
                    --_card-icon-colour: gray !important;
                }
            }
        }
    }

    .panel-right {
        .panel-title {
            font-size: 1.4em;
            font-weight: normal;
            color: #bb4c1a;
            margin-bottom: 0.5em;
        }
    }

    #adminPanel {
        margin-block:1em;

        #adminToolbar,
        .adminToolbar {
            .btn-wide {
                min-width: 10em;
            }
        }

        ul {
            a {
                font-size: 90%;
            }

            div.msg {
                margin: 1em;
                white-space: nowrap;
            }
        }
    }

    .studyarea-map,
    .geometry-map {
        height: 300px;
        width: 300px;
    }

    .mintDOI {
        margin: 0 1em;
    }

    // Prevent definition lists from wrapping the term
    .dl-horizontal dt {
        white-space: normal;
    }

    .panel {
        overflow-wrap: break-word;
    }

    .panel,
    .panel-heading {
        border-radius: 0;
    }

    .panel-heading {
        padding: 0.5em 1em;
    }

    .externalVocabularyLink {
        font-size: 0.85em;
    }

    .responsibleParty {
        a.contactEmail {
            margin-left: 0.5em;
            font-size: 75%;
        }

        a.contactEmail:hover {
            background-color: #99aefd;
            color: #fff;
            text-decoration: none;
        }

        .nameIdentifier {
            font-size: 90%;

            span {
                font-size: 80%;
                margin-left: 0.75em;
            }
        }

        margin-bottom: 1.5em;

        address {
            margin-bottom: 0;
        }
    }

    .responsiblePartyCollapse.trigger.collapse {
        display: block
    }

    .responsiblePartyCollapse.trigger {
        &:not(.in) {
            a.moreAuthors {
                &::after {
                    content: "more ↓";
                }

                span {
                    display: inline;
                }
            }
        }

        &.in {
            a.moreAuthors {
                &::after {
                    content: "fewer ↑";
                }

                span {
                    display: none;
                }
            }
        }
    }


    #document-upload-panel {
        border-radius: 0;

        .panel-body {
            padding: 1em;

            p {
                font-weight: bold;
                font-size: 1.2em;
                margin: 0;
            }
        }
    }

    .funding {
        .award {
            .awardNumber {
                margin-left: 2em;
            }
        }
    }

    #associations {
        div {
            margin-bottom: 2.5em;

            p {
                margin: 0 0 0.4em 3em;
            }
        }
    }

    #section-onlineResources {
        p {
            margin-bottom: 1.5em;
        }
    }

    .panel {
        border-radius: var(--border-radius);

        .panel-heading {
            border-radius: var(--border-radius) var(--border-radius) 0 0;
        }
    }

    @media (min-width: 768px) {
        .dl-horizontal dt {
            width: 15em;
            white-space: normal;
        }

        .dl-horizontal dd {
            margin-left: 16em;
            margin-bottom: 0.3em;
        }

        .alert--linked-eidc {
            grid-template-columns: 240px auto;
        }
    }

    @media (min-width: 468px) {
        .dl-horizontal dd {
            margin-bottom: 1em;
        }
    }

    #section-metadataQuality {
        .panel-heading {
            color: #fff;

            .col-sm-9 {
                text-align: right;
            }
        }

        .panel-heading.MDquality_error {
            background-color: var(--quality-error);
        }

        .panel-heading.MDquality_warning {
            background-color: var(--quality-warning);
        }

        .panel-heading.MDquality_info {
            background-color: var(--quality-info);
        }

        ul.MDquality_error {
            li {
                color: var(--quality-error);
                font-weight: bold;
                background-color: var(--quality-error-fade);
            }
        }

        ul.MDquality_warning {
            li {
                color: var(--quality-warning);
                font-weight: bold;
                background-color: var(--quality-warning-fade);
            }
        }

        ul.MDquality_info {
            li {
                background-color: var(--quality-info-fade);
            }
        }

        span {
            color: #00d;

            &::before {
                content: " «";
            }

            &::after {
                content: "» ";
            }
        }
    }

    .browseGraphic {
        @extend .float-end !optional;
        margin: 0 0 1em 2em;
        max-width: 30em;
        max-height: 30em;
    }

    /*SIGNPOST*/
    .signpost-content {
        .signpost-logo {
            grid-area: signpost-logo;
            justify-self: right;
        }

        .signpost-text {
            grid-area: signpost-text;
        }

        .signpost-url {
            grid-area: signpost-url;
        }
    }

    #section-title {
        .signpost-logo {
            display: none;
        }

        .signpost-logo img {
            max-width: 140px;
        }

        .signpost-content {
            display: grid;
            gap: 1em;
            grid-template-columns: auto fit-content(120px);
            grid-template-areas:
                "signpost-text signpost-text"
                "signpost-url signpost-url";
        }

        @media only screen and (min-width: 420px) {
            .signpost-content {
                grid-template-areas:
                    "signpost-text signpost-logo"
                    "signpost-url signpost-logo";
            }

            .signpost-logo {
                display: block;
            }
        }
    }

    .distribution-signpost {
        .signpost-logo {
            img {
                max-width: 140px;
            }
        }

        .signpost-content {
            display: grid;
            gap: 1em;
            grid-template-columns: auto fit-content(200px);
            grid-template-areas:
                "signpost-logo signpost-logo"
                "signpost-text signpost-text"
                "signpost-url signpost-url";

            .signpost-logo {
                justify-self: center;
            }
        }

        @media only screen and (max-width: 1020px) and (min-width: 420px) {
            .signpost-content {
                grid-template-areas:
                    "signpost-text signpost-logo"
                    "signpost-url signpost-logo";

                .signpost-logo {
                    justify-self: right;
                }
            }
        }
    }
}


.metadata-monitoring {

    .studyarea-map,
    .geometry-map {
        height: 500px;
        width: 700px;
    }

    .key-value {
        >div {
            padding: .5em 0;
        }

        .key {
            font-weight: 600;
        }
    }

    h2 {
        clear: both;
        padding-top: 2em;
    }
}


#publication {
    div {
        margin: 4em auto;
        text-align: center;

        .btn {
            min-width: 18em;
        }
    }
}

dl.dl-horizontal {
    &--compact {
        margin-left: 5rem;

        dt {
            overflow: hidden;
            text-overflow: ellipsis;
        }

        dd {
            margin-bottom: 0.3rem !important;
        }
    }
}

@media screen and (min-width: 768px) {
    .ceh-model {
        dl.dl-horizontal {
            &--compact {
                margin-left: 0;
            }
        }
    }
}

.ceh-model {
    .description {
        margin-bottom: 2em;
    }

    section {
        h2 {
            color: gray;
            margin-top: 4em;
            border: none;
        }
    }

    .key-value {
        padding: 1.5em 0;
        border-top: 1px solid lightgray;

        &:first-of-type {
            border: none;
        }

        .key {
            .key-name {
                font-size: 1.1em;
                font-weight: bold;
            }
        }
    }
}

.codeDocument {
    .adminToolbar {
        z-index: 1000;
        position: absolute;
        top: 8rem;
        left: min(calc(100vw - 20em), 1120px);
        width: fit-content;
    }

    .grid {
        display: grid;
        grid-template-columns: auto 280px;
        grid-template-areas:
            "one one"
            "two two"
            "three three";

        .grid--one {
            grid-area: one;
        }

        .grid--two {
            grid-area: two;
        }

        .grid--three {
            grid-area: three;
        }

        @media screen and (min-width: 850px) {
            --gridspacing: 1em;
            grid-template-areas:
                "one two"
                "three two";

            .grid--two {
                >div {
                    border-left: 1px solid lightgray;
                    padding-left: var(--gridspacing);
                    margin-left: var(--gridspacing);
                }
            }
        }
    }
}

//MEDIA
@media only screen and (min-width: 1020px) {
    .metadata-grid {
        gap: 0 2em;
        grid-template-areas: "col1 col2";

        .col2:has(*) {
            border-left: 1px solid lightgray;
            padding-left: 2em;
        }
    }
}
